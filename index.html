<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PET Words Adventure ğŸ®</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Fun vocabulary learning app for PET English exam">
    <meta name="theme-color" content="#6C5CE7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PET Words">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons (for iPad home screen) -->
    <link rel="apple-touch-icon" href="assets/icons/icon.svg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/icons/icon.svg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    
    <!-- iPad Splash Screens -->
    <style>
        /* Prevent pull-to-refresh on iOS */
        html, body {
            overscroll-behavior-y: contain;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
    </div>

    <!-- Main App Container -->
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">ğŸ“š</span>
                <h1>PET Words Adventure</h1>
            </div>
            <div class="header-stats">
                <div class="stat-badge streak">
                    <span class="stat-icon">ğŸ”¥</span>
                    <span id="streak-count">0</span>
                    <span class="stat-label">å¤©</span>
                </div>
                <div class="stat-badge stars">
                    <span class="stat-icon">â­</span>
                    <span id="stars-count">0</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
            <!-- Home Screen -->
            <section id="home-screen" class="screen active">
                <div class="welcome-card">
                    <h2>æ¬¢è¿å›æ¥ï¼Ready to learn? ğŸš€</h2>
                    <div class="daily-goal">
                        <div class="goal-progress">
                            <div class="goal-bar">
                                <div id="daily-progress-bar" class="goal-fill" style="width: 0%"></div>
                            </div>
                            <span id="daily-progress-text">ä»Šæ—¥è¿›åº¦: 0/10 è¯</span>
                        </div>
                    </div>
                </div>

                <div class="topic-section">
                    <h3>ğŸ“– é€‰æ‹©ä¸»é¢˜ Choose a Topic</h3>
                    <div id="topics-grid" class="topics-grid">
                        <!-- Topics loaded dynamically -->
                    </div>
                </div>
            </section>

            <!-- Topic Detail Screen -->
            <section id="topic-screen" class="screen">
                <button class="back-btn" onclick="app.goHome()">
                    <span>â†</span> è¿”å›
                </button>
                
                <div class="topic-header">
                    <span id="topic-icon" class="topic-big-icon">ğŸ‘”</span>
                    <div class="topic-info">
                        <h2 id="topic-title">Clothes and Accessories</h2>
                        <p id="topic-subtitle">è¡£æœä¸é¥°å“</p>
                        <div class="topic-progress">
                            <div class="progress-bar">
                                <div id="topic-progress-fill" class="progress-fill"></div>
                            </div>
                            <span id="topic-progress-text">0/70 å·²å­¦ä¼š</span>
                        </div>
                    </div>
                </div>

                <div class="mode-buttons">
                    <button class="mode-btn flashcard-btn" onclick="app.startFlashcards()">
                        <span class="mode-icon">ğŸ´</span>
                        <span class="mode-text">
                            <strong>å•è¯å¡ç‰‡</strong>
                            <small>Flashcards</small>
                        </span>
                    </button>
                    <button class="mode-btn story-btn" onclick="app.startStories()">
                        <span class="mode-icon">ğŸ“–</span>
                        <span class="mode-text">
                            <strong>è¶£å‘³æ•…äº‹</strong>
                            <small>Memory Stories</small>
                        </span>
                    </button>
                    <button class="mode-btn quiz-btn" onclick="app.startQuiz()">
                        <span class="mode-icon">ğŸ¯</span>
                        <span class="mode-text">
                            <strong>å°æµ‹éªŒ</strong>
                            <small>Quiz Mode</small>
                        </span>
                    </button>
                    <button class="mode-btn library-btn" onclick="app.startLibrary()">
                        <span class="mode-icon">ğŸ“š</span>
                        <span class="mode-text">
                            <strong>å•è¯åº“</strong>
                            <small>Word Library</small>
                        </span>
                    </button>
                </div>
            </section>

            <!-- Flashcard Screen -->
            <section id="flashcard-screen" class="screen">
                <button class="back-btn" onclick="app.goToTopic()">
                    <span>â†</span> è¿”å›
                </button>

                <div class="flashcard-container">
                    <div class="flashcard-progress">
                        <span id="card-counter">1 / 70</span>
                        <div class="mini-progress">
                            <div id="card-progress-fill" class="mini-progress-fill"></div>
                        </div>
                    </div>

                    <div id="flashcard" class="flashcard" onclick="flashcard.flip()">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <span class="card-word" id="card-english">backpack</span>
                                <div class="sound-buttons">
                                    <button class="sound-btn" onclick="event.stopPropagation(); flashcard.speak();" title="Listen å¬å‘éŸ³">
                                        ğŸ”Š
                                    </button>
                                    <button class="sound-btn sound-btn-slow" onclick="event.stopPropagation(); flashcard.speakSlow();" title="Listen slowly æ…¢é€Ÿæ’­æ”¾">
                                        ğŸ¢
                                    </button>
                                </div>
                                <span class="card-hint">ç‚¹å‡»ç¿»è½¬ ğŸ‘†</span>
                            </div>
                            <div class="flashcard-back">
                                <span class="card-word" id="card-chinese">èƒŒåŒ…</span>
                                <span class="card-english-small" id="card-english-back">backpack</span>
                                <div class="sound-buttons sound-buttons-back">
                                    <button class="sound-btn sound-btn-back" onclick="event.stopPropagation(); flashcard.speak();" title="Listen å¬å‘éŸ³">
                                        ğŸ”Š
                                    </button>
                                    <button class="sound-btn sound-btn-back sound-btn-slow" onclick="event.stopPropagation(); flashcard.speakSlow();" title="Listen slowly æ…¢é€Ÿæ’­æ”¾">
                                        ğŸ¢
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Example Sentence -->
                    <div class="example-sentence">
                        <div class="example-label">ğŸ“ Example ä¾‹å¥:</div>
                        <div class="example-english" id="example-english">I carry my books in my backpack.</div>
                        <div class="example-chinese" id="example-chinese">æˆ‘ç”¨èƒŒåŒ…è£…ä¹¦ã€‚</div>
                        <button class="sound-btn-example" onclick="flashcard.speakExample()" title="Listen to example">
                            ğŸ”Š å¬ä¾‹å¥
                        </button>
                    </div>

                    <div class="flashcard-actions">
                        <button class="action-btn wrong-btn" onclick="flashcard.markWrong()">
                            <span>ğŸ˜•</span>
                            <small>å†å­¦å­¦</small>
                        </button>
                        <button class="action-btn correct-btn" onclick="flashcard.markCorrect()">
                            <span>ğŸ˜„</span>
                            <small>è®°ä½äº†!</small>
                        </button>
                    </div>

                    <div class="flashcard-nav">
                        <button class="nav-btn" onclick="flashcard.prev()">â¬…ï¸ ä¸Šä¸€ä¸ª</button>
                        <button class="nav-btn" onclick="flashcard.next()">ä¸‹ä¸€ä¸ª â¡ï¸</button>
                    </div>
                </div>
            </section>

            <!-- Story Screen -->
            <section id="story-screen" class="screen">
                <button class="back-btn" onclick="app.goToTopic()">
                    <span>â†</span> è¿”å›
                </button>

                <div class="story-container">
                    <div class="story-header">
                        <h2 id="story-title">ğŸ“– Grandma's Pool Party Disaster</h2>
                        <p id="story-title-chinese">å¥¶å¥¶çš„æ³³æ± æ´¾å¯¹ç¾éš¾</p>
                        <div class="story-stats">
                            <span class="word-count">ğŸ·ï¸ <span id="story-word-count">29</span> ä¸ªå•è¯</span>
                        </div>
                    </div>

                    <div class="story-content">
                        <div class="story-tabs">
                            <button class="story-tab active" onclick="stories.showEnglish()">English</button>
                            <button class="story-tab" onclick="stories.showChinese()">ä¸­æ–‡</button>
                            <button class="story-tab" onclick="stories.showBoth()">åŒè¯­</button>
                        </div>
                        
                        <div id="story-text" class="story-text">
                            <!-- Story content loaded dynamically -->
                        </div>
                    </div>

                    <div class="story-nav">
                        <button class="story-nav-btn" onclick="stories.prev()">â¬…ï¸ ä¸Šä¸€ä¸ªæ•…äº‹</button>
                        <span id="story-counter">1 / 4</span>
                        <button class="story-nav-btn" onclick="stories.next()">ä¸‹ä¸€ä¸ªæ•…äº‹ â¡ï¸</button>
                    </div>
                </div>

                <!-- Word Popup -->
                <div id="word-popup" class="word-popup hidden">
                    <div class="popup-content">
                        <span class="popup-english" id="popup-english">fashion</span>
                        <span class="popup-chinese" id="popup-chinese">æ—¶å°š</span>
                        <button class="popup-close" onclick="stories.closePopup()">âœ•</button>
                    </div>
                </div>
            </section>

            <!-- Word Library Screen -->
            <section id="library-screen" class="screen">
                <button class="back-btn" onclick="app.goToTopic()">
                    <span>â†</span> è¿”å›
                </button>

                <div class="library-container">
                    <div class="library-header">
                        <h2>ğŸ“š å•è¯åº“ Word Library</h2>
                        <div class="library-stats">
                            <span class="stat-learned">âœ… <span id="library-learned">0</span> å·²å­¦ä¼š</span>
                            <span class="stat-total">ğŸ“– <span id="library-total">70</span> æ€»è¯æ•°</span>
                        </div>
                    </div>

                    <div class="library-controls">
                        <div class="search-box">
                            <span class="search-icon">ğŸ”</span>
                            <input type="text" id="library-search" placeholder="æœç´¢å•è¯ Search..." oninput="library.search(this.value)">
                        </div>
                        <div class="filter-buttons">
                            <button class="filter-btn active" onclick="library.filter('all')">å…¨éƒ¨</button>
                            <button class="filter-btn" onclick="library.filter('learned')">å·²å­¦ä¼š âœ…</button>
                            <button class="filter-btn" onclick="library.filter('unlearned')">æœªå­¦ä¹  ğŸ“–</button>
                        </div>
                    </div>

                    <div id="library-list" class="library-list">
                        <!-- Words loaded dynamically -->
                    </div>
                </div>

                <!-- Word Detail Popup -->
                <div id="word-detail-popup" class="word-detail-popup hidden">
                    <div class="word-detail-content">
                        <button class="popup-close" onclick="library.closeDetail()">âœ•</button>
                        <div class="word-detail-main">
                            <span class="detail-english" id="detail-english">backpack</span>
                            <div class="detail-sound-buttons">
                                <button class="sound-btn-detail" onclick="library.speak()" title="Listen">ğŸ”Š</button>
                                <button class="sound-btn-detail" onclick="library.speakSlow()" title="Listen slowly">ğŸ¢</button>
                            </div>
                        </div>
                        <span class="detail-chinese" id="detail-chinese">èƒŒåŒ…</span>
                        <div class="detail-example">
                            <p class="detail-example-en" id="detail-example-en">I carry my books in my backpack.</p>
                            <p class="detail-example-cn" id="detail-example-cn">æˆ‘ç”¨èƒŒåŒ…è£…ä¹¦ã€‚</p>
                            <button class="sound-btn-example-detail" onclick="library.speakExample()">ğŸ”Š å¬ä¾‹å¥</button>
                        </div>
                        <div class="detail-status" id="detail-status">
                            <span class="status-learned">âœ… å·²å­¦ä¼š</span>
                        </div>
                        <button class="mark-learned-btn" id="mark-learned-btn" onclick="library.toggleLearned()">
                            æ ‡è®°ä¸ºå·²å­¦ä¼š
                        </button>
                    </div>
                </div>
            </section>

            <!-- Quiz Screen -->
            <section id="quiz-screen" class="screen">
                <button class="back-btn" onclick="app.goToTopic()">
                    <span>â†</span> è¿”å›
                </button>

                <div class="quiz-container">
                    <div class="quiz-header">
                        <div class="quiz-score">
                            <span>å¾—åˆ†: </span>
                            <span id="quiz-score">0</span>
                        </div>
                        <div class="quiz-progress">
                            <span id="quiz-counter">1 / 10</span>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h3 id="quiz-prompt">è¿™ä¸ªè¯æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h3>
                        <div id="quiz-word" class="quiz-word">backpack</div>
                    </div>

                    <div id="quiz-options" class="quiz-options">
                        <!-- Options loaded dynamically -->
                    </div>

                    <div id="quiz-feedback" class="quiz-feedback hidden">
                        <span id="feedback-icon">âœ…</span>
                        <span id="feedback-text">æ­£ç¡®!</span>
                    </div>

                    <button id="quiz-next-btn" class="quiz-next-btn hidden" onclick="quiz.nextQuestion()">
                        ä¸‹ä¸€é¢˜ â¡ï¸
                    </button>
                </div>

                <!-- Quiz Complete Modal -->
                <div id="quiz-complete" class="modal hidden">
                    <div class="modal-content celebration">
                        <h2>ğŸ‰ æµ‹éªŒå®Œæˆ!</h2>
                        <div class="final-score">
                            <span id="final-score">8</span>
                            <span class="score-divider">/</span>
                            <span>10</span>
                        </div>
                        <p id="score-message">å¤ªæ£’äº†ï¼ç»§ç»­åŠ æ²¹ï¼</p>
                        <div class="stars-earned">
                            <span id="stars-earned">â­â­â­</span>
                        </div>
                        <button class="primary-btn" onclick="app.goToTopic()">è¿”å›</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Made with â¤ï¸ for learning PET words</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/progress.js"></script>
    <script src="js/data-loader.js"></script>
    <script src="js/flashcard.js"></script>
    <script src="js/stories.js"></script>
    <script src="js/quiz.js"></script>
    <script src="js/library.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration (for offline support) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('âœ… Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('âŒ Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>

